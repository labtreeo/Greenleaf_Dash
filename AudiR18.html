<div class="container mainhub" ng-style="{'background-color': color}" >

    <div class="row row-cols-2" style="padding-top: 0.4rem;">

        <div class="col col-6 wrapBat">
            <div class="batteryState" ng-class="{charging: ir.PowerMGU_K < 0, discharging: ir.PowerMGU_K > 0}">
                <div class="percWrap">
                    <div ng-style="{ 'width': ir.EnergyERSBatteryPct * 89 + '%'}"  style="position: absolute; background-color:rgb(34,152,43); border-radius: 5px; color: transparent">-</div>

                    <svg class="bi bi-lightning-fill" style="position: relative; z-index: 10; float:left; margin-top: 0.35rem" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"/>
                    </svg>

                    <span ng-bind="ir.EnergyERSBatteryPct * 100 | number:1 | percentage" style="position: relative; z-index: 10; margin-right: 5px"></span>

                </div>
            </div>
        </div>

        <div class="col col-6 wrapDep">
            <div class="deployState">
                <div class="percWrap">

                    <div ng-style="{ 'width': ir.EnergyMGU_KLapDeployPct * 89 + '%'}" style="position: absolute; background-color:rgb(71,82,255); border-radius: 5px; color: transparent">-</div>

                    <svg class="bi bi-caret-right-fill" style="position: relative; z-index: 10; float:left; margin-top: 0.35rem" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                    </svg>

                    <span ng-bind="ir.EnergyMGU_KLapDeployPct * 100 | number:1 | percentage" style="position: relative; z-index: 10; margin-right: 5px"></span>
                </div>
            </div>
        </div>

    </div>

    <div class="row" style="margin-top: .4rem; padding-bottom: 0.2rem; border-style: solid; border-width: 0px; border-top-width: 1px;"></div>

    <div class="row row-cols-17" style="margin-left: -0.8rem">

        <div class="col" style="padding-top:2rem; margin-left: -1.2rem;max-height: 35px">
            <div class="col-1">
                <div ng-if="ir.dcHysNoBoostToggle">
                    <svg class="bi bi-battery-charging text-danger" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.5 9.5a1.5 1.5 0 0 0 0-3v3z"/>
                        <path fill-rule="evenodd" d="M9.585 2.568a.5.5 0 0 1 .226.58L8.677 6.832h1.99a.5.5 0 0 1 .364.843l-5.334 5.667a.5.5 0 0 1-.842-.49L5.99 9.167H4a.5.5 0 0 1-.364-.843l5.333-5.667a.5.5 0 0 1 .616-.09z"/>
                        <path fill-rule="evenodd" d="M6.332 4H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2.072l.307-1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.391l.941-1zM4.45 6H2v4h1.313a1.5 1.5 0 0 1-.405-2.361L4.45 6zm.976 5l-.308 1H6.96l.21-.224h.001l.73-.776H6.53l-.085.09.028-.09H5.426zm1.354-1H5.733l.257-.833H4a.5.5 0 0 1-.364-.843l.793-.843L5.823 6h1.373L5.157 8.167h1.51a.5.5 0 0 1 .478.647L6.78 10zm.69 0h1.374l1.394-1.482.793-.842a.5.5 0 0 0-.364-.843h-1.99L8.933 6H7.887l-.166.54-.199.646A.5.5 0 0 0 8 7.833h1.51L7.47 10zm.725-5H9.24l.308-1H7.706l-.942 1h1.374l.085-.09-.028.09zm2.4-1l-.308 1H12a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H9.276l-.942 1H12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.405zm-.378 6H12V8.02a1.499 1.499 0 0 1-.241.341L10.217 10zM12 6.646V6h-.646a1.5 1.5 0 0 1 .646.646z"/>
                    </svg>
                </div>

                <div ng-if="!ir.dcHysNoBoostToggle">
                    <svg class="bi bi-battery-charging text-success" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.5 9.5a1.5 1.5 0 0 0 0-3v3z"/>
                        <path fill-rule="evenodd" d="M9.585 2.568a.5.5 0 0 1 .226.58L8.677 6.832h1.99a.5.5 0 0 1 .364.843l-5.334 5.667a.5.5 0 0 1-.842-.49L5.99 9.167H4a.5.5 0 0 1-.364-.843l5.333-5.667a.5.5 0 0 1 .616-.09z"/>
                        <path fill-rule="evenodd" d="M6.332 4H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2.072l.307-1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.391l.941-1zM4.45 6H2v4h1.313a1.5 1.5 0 0 1-.405-2.361L4.45 6zm.976 5l-.308 1H6.96l.21-.224h.001l.73-.776H6.53l-.085.09.028-.09H5.426zm1.354-1H5.733l.257-.833H4a.5.5 0 0 1-.364-.843l.793-.843L5.823 6h1.373L5.157 8.167h1.51a.5.5 0 0 1 .478.647L6.78 10zm.69 0h1.374l1.394-1.482.793-.842a.5.5 0 0 0-.364-.843h-1.99L8.933 6H7.887l-.166.54-.199.646A.5.5 0 0 0 8 7.833h1.51L7.47 10zm.725-5H9.24l.308-1H7.706l-.942 1h1.374l.085-.09-.028.09zm2.4-1l-.308 1H12a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H9.276l-.942 1H12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.405zm-.378 6H12V8.02a1.499 1.499 0 0 1-.241.341L10.217 10zM12 6.646V6h-.646a1.5 1.5 0 0 1 .646.646z"/>
                    </svg>
                </div>

                <div ng-if="!ir.dcHysBoostHold">
                    <svg class="bi bi-battery-full" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M12 5H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zM2 4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H2z"/>
                        <path d="M2 6h10v4H2V6zm12.5 3.5a1.5 1.5 0 0 0 0-3v3z"/>
                    </svg>
                </div>

                <div ng-if="ir.dcHysBoostHold">
                    <svg class="bi bi-battery-half" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M12 5H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zM2 4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H2z"/>
                        <path d="M2 6h5v4H2V6zm12.5 3.5a1.5 1.5 0 0 0 0-3v3z"/>
                    </svg>
                </div>
                <div ng-if="!ir.dcHeadlightFlash">
                    <svg class="bi bi-lightning-fill flashing" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09z"/>
                    </svg>
                </div>

                <img ng-if="ir.FuelLevel < 10 && ir.FuelLevel >= 5" src="Images/gas-station.png" style="filter: invert(93%) sepia(98%) saturate(1096%) hue-rotate(325deg) brightness(113%) contrast(92%);">
                <img ng-if="ir.FuelLevel < 5 && ir.FuelLevel >= 1" src="Images/gas-station.png" style="filter: invert(41%) sepia(95%) saturate(570%) hue-rotate(326deg) brightness(99%) contrast(95%);">
                <img ng-if="ir.FuelLevel < 1" src="Images/gas-station.png" class="fuelFlashing" style="filter: invert(41%) sepia(95%) saturate(570%) hue-rotate(326deg) brightness(99%) contrast(95%);">
            </div>
        </div>

        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledGreen: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 3800}"></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledGreen: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 3900}"></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledGreen: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4000}"></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledGreen: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4100}"></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledGreen: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4200}" ></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledGreen: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4250}" ></span>
        </div>

        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledYellow: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4320}" ></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledYellow: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4425}" ></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledYellow: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4500}" ></span>
        </div>

        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledRed: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4560}"></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledRed: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4630}"></span>
        </div>
        <div class="col">
            <span class="dot" ng-class="{blinking : ir.dcPitSpeedLimiterToggle == true, revledRed: ir.dcPitSpeedLimiterToggle == true || ir.RPM > 4700}"></span>
        </div>

        <div class="col"></div>

    </div>

    <div class="row row-cols-3">

        <div class="col-4">

            <div style="margin-left: 3.6rem">
                <div class="row">
                    <span class="kph">KPH</span>
                </div>

                <div class="row">
                    <span class="speed" ng-bind="ir.Speed * 3.6 | number:0 "></span>
                </div>

                <div class="row">
                    <span class="rpmText" >RPM</span>
                </div>

                <div class="row">
                    <span class="rpm" ng-bind="ir.RPM | limitTo:4"></span>
                </div>
            </div>

        </div>

        <div class="col-4" >
            <div class="row">
                <div class="col, gear" ng-if="ir.Gear == -1">R</div>
                <div class="col, gear" ng-if="ir.Gear == 0">N</div>
                <div class="col, gear" ng-bind="ir.Gear" ng-if="ir.Gear > 0"></div>
            </div>
            <div class="row">
                <span class="timeleft"ng-bind="ir.SessionTimeRemain | secondsToDateTime "></span>
            </div>
        </div>

        <div class="col-4">
            <div style="margin-left: -3rem">
                <div class="row">
                    <span class="position" ng-if="ir.PlayerCarClassPosition > 0" ng-bind=" 'P' + ir.PlayerCarClassPosition" ></span>
                    <span class="position" ng-if="ir.PlayerCarClassPosition == 0" >P-</span>
                </div>

                <div class="row" ng-show="delta == 'optimal'">

                    <span class="delta" ng-if="ir.LapDeltaToSessionBestLap == 0 && ir.LapDeltaToSessionOptimalLap == 0">--,--</span>

                    <span class="delta deltaGreen" ng-if="ir.LapDeltaToSessionOptimalLap < 0" ng-bind="ir.LapDeltaToSessionOptimalLap | number:2 | plusOrMinus"></span>
                    <span class="delta deltaRed" ng-if="ir.LapDeltaToSessionOptimalLap > 0" ng-bind="ir.LapDeltaToSessionOptimalLap | number:2 | plusOrMinus"></span>


                </div>

                <div class="row" ng-show="delta == 'best'">

                    <span class="delta" ng-if="ir.LapDeltaToSessionBestLap == 0 && ir.LapDeltaToSessionOptimalLap == 0">--,--</span>

                    <span class="delta deltaGreen" ng-if="ir.LapDeltaToSessionBestLap == 0 && ir.LapDeltaToSessionOptimalLap < 0" ng-bind="ir.LapDeltaToSessionOptimalLap | number:2 | plusOrMinus"></span>
                    <span class="delta deltaRed" ng-if="ir.LapDeltaToSessionBestLap == 0 && ir.LapDeltaToSessionOptimalLap > 0" ng-bind="ir.LapDeltaToSessionOptimalLap | number:2 | plusOrMinus"></span>

                    <span class="delta deltaGreen" ng-if="ir.LapDeltaToSessionBestLap < 0" ng-bind="ir.LapDeltaToSessionBestLap | number:2 | plusOrMinus"></span>
                    <span class="delta deltaRed" ng-if="ir.LapDeltaToSessionBestLap > 0" ng-bind="ir.LapDeltaToSessionBestLap | number:2 | plusOrMinus"></span>

                </div>

                <div class="row" ng-show="delta == 'last'">

                    <span class="delta" ng-if="ir.LapDeltaToSessionLastlLap == 0 && ir.LapDeltaToSessionOptimalLap == 0">--,--</span>

                    <span class="delta deltaGreen" ng-if="ir.LapDeltaToSessionLastlLap == 0 && ir.LapDeltaToSessionOptimalLap < 0" ng-bind="ir.LapDeltaToSessionOptimalLap | number:2 | plusOrMinus"></span>
                    <span class="delta deltaRed" ng-if="ir.LapDeltaToSessionLastlLap == 0 && ir.LapDeltaToSessionOptimalLap > 0" ng-bind="ir.LapDeltaToSessionOptimalLap | number:2 | plusOrMinus"></span>

                    <span class="delta deltaGreen" ng-if="ir.LapDeltaToSessionLastlLap < 0" ng-bind="ir.LapDeltaToSessionLastlLap | number:2 | plusOrMinus"></span>
                    <span class="delta deltaRed" ng-if="ir.LapDeltaToSessionLastlLap > 0" ng-bind="ir.LapDeltaToSessionLastlLap | number:2 | plusOrMinus"></span>

                </div>

                <div class="row" ng-show="Lap == 'optimal'">
                    <span class="lastLap" ng-if="ir.LapOptimalLapTime == 0 "></span>
                    <span ng-if="ir.LapOptimalLapTime > 60" class="lastLap" ng-if="ir.LapOptimalLapTime > 0 "ng-bind="ir.LapOptimalLapTime | toMinSec"></span>
                </div>

                <div class="row" ng-show="Lap == 'best'">
                    <span class="lastLap" ng-if="ir.LapLastLapTime == 0 "></span>
                    <span ng-if="ir.LapBestLapTime > 60" class="lastLap" ng-if="ir.LapBestLapTime > 0 "ng-bind="ir.LapBestLapTime | toMinSec"></span>
                </div>

                <div class="row" ng-show="Lap == 'last'">
                    <span class="lastLap" ng-if="ir.LapLastLapTime == 0 "></span>
                    <span ng-if="ir.LapLastLapTime > 60" class="lastLap" ng-if="ir.LapLastLapTime > 0 "ng-bind="ir.LapLastLapTime | toMinSec"></span>
                </div>

            </div>
        </div>
    </div>

    <div class="row row-cols-5 bottomHub">
        <div class="col">
            <div class="row bb">
                <span class="bottomHubText">BB</span>
            </div>

            <div class="row bb" >
                <span class="bottomHubText" ng-bind="ir.dcBrakeBias | number:1 | percentage"></span>
            </div>

        </div>
        <div class="col">
            <div class="row bb">
                <span class="bottomHubText">IBS</span>
            </div>

            <div class="row bb" >
                <span class="bottomHubText" ng-bind="ir.dcABS"></span>
            </div>

        </div>
        <div class="col">
            <div class="row bb">
                <span class="bottomHubText">TC4</span>
            </div>

            <div class="row bb" >
                <span class="bottomHubText" ng-bind="ir.dcTractionControl3 | number:2"></span>
            </div>

        </div>
        <div class="col">
            <div class="row bb">
                <span class="bottomHubText">MGU</span>
            </div>

            <div class="row bb">
                <span class="bottomHubText" ng-bind="ir.dcMGUKDeployFixed"></span>
            </div>

        </div>
        <div class="col">
            <div class="row bb">
                <span class="bottomHubText">INC</span>
            </div>

            <div class="row bb" ng-if="ir.WeekendInfo.WeekendOptions.IncidentLimit == 'unlimited'">
                <span class="bottomHubText" ng-bind="ir.PlayerCarTeamIncidentCount"></span>
            </div>

            <div class="row bb" ng-if="ir.WeekendInfo.WeekendOptions.IncidentLimit != 'unlimited'">
                <span class="bottomHubText" ng-bind="ir.PlayerCarTeamIncidentCount + '/' + ir.WeekendInfo.WeekendOptions.IncidentLimit"></span>
            </div>
        </div>
    </div>

</div>